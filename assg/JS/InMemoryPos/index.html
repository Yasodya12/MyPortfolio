<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="assets/css/bootstrap.css">
    <script src="assets/js/bootstrap.js"></script>
    <style>
        .btnEdit{
            background-color:black;
            color: white;
            border-radius: 5px;
            border: none; width: 50px;
            height: 30px;
            margin-right:5px ;
        }
        .btnDelete{
            background-color:red;
            color: white;
            border-radius: 5px;
            border: none;
            width: 70px;
            height: 30px;
        }


    </style>
    <script src="assets/code.jquery.com_jquery-3.7.0.min.js"></script>
</head>
<header  >

    <nav style="background-color: black" class="navbar navbar-expand-lg bg-dark ">
        <div class="container-fluid ">
            <img src="assets/Rishika%20Quick%20Logo%202.png" alt="Logo" width="75" height="75" class="d-inline-block align-text-top">
            <p id="p-inheader" class="collapse navbar-collapse">Rishika's pos system</p>
            <div >
                <ul class="navbar-nav">
                    <li class="nav-item ">
                        <a id="btnCustomer" class="nav-link active text-warning" aria-current="page" href="#">Customer</a>
                    </li>
                    <li class="nav-item">
                        <a id="btnOrder" class="nav-link active text-warning" aria-current="page" href="#">Order</a>
                    </li>
                    <li class="nav-item">
                        <a id="btnItems" class="nav-link active text-warning" aria-current="page" href="#">Items</a>

                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>
<body >


<section class="container text-start" id="customer">
    <h1>Customer Form &copy;</h1>
    <section class="row row-gap-5">
        <section class="row row-gap-3 row align-items-center row justify-content-between">

            <div class="col-6">

                <div >
                    <label  class="form-label">Customer ID</label>
                    <input id="CustID" type="text" class="form-control" id="customerID" aria-describedby="emailHelp">
                </div>

                <div >
                    <label  class="form-label">Customer Name</label>
                    <input id="CustName" type="text" class="form-control"aria-describedby="emailHelp">
                </div>

                <div >
                    <label  class="form-label">Address</label>
                    <input id="CustAddress" type="text" class="form-control"  aria-describedby="emailHelp">
                </div>

                <div >
                    <label  class="form-label">Contact</label>
                    <input id="CustContact" type="text" class="form-control" aria-describedby="emailHelp">
                </div>

                <div>
                    <button id="btnCustSave111" type="submit" class="btn btn-primary ">Save</button>
                    <button id="btnUpdateCust" type="submit" class="btn btn-primary bg-success">Update</button>
                    <button id="btnDelteCust" type="submit" class="btn btn-primary bg-danger">Delete</button>
                </div>
            </div>

            <div class="col-4">
                <section class="row align-items-center">
                    <div class="col">
                        <h1>Search Customer</h1>
                        <div >
                            <label  class="form-label">Customer ID</label>
                            <input type="text" class="form-control" id="srhItmID" aria-describedby="emailHelp">
                            <button type="submit" class="btn btn-primary ">Search</button>
                        </div>

                    </div>
                </section>

            </div>
        </section>

        <section >
            <table id="customerTable" class="table table-striped table-hover">
                <thead class="bg-warning bg-opacity-75">
                <tr>
                    <th scope="col">Customer-ID</th>
                    <th scope="col">Name</th>
                    <th scope="col">Address</th>
                    <th scope="col">Contact</th>
                </tr>
                </thead>
                <tbody id="tableCustomerBody">

                </tbody>
            </table>

        </section>
    </section>

</section>

<!--Items-->
<section class="container text-start" id="item">
    <h1>Item Form &copy;</h1>
    <section class="row row-gap-5">
        <section class="row row-gap-3 row align-items-center row justify-content-between">

            <div class="col-6">

                <div >
                    <label  class="form-label">Item ID</label>
                    <input id="txtItemID" type="text" class="form-control" id="itemID" aria-describedby="emailHelp">
                </div>

                <div >
                    <label  class="form-label">Item Name</label>
                    <input id="txtItemName" type="text" class="form-control"aria-describedby="emailHelp">
                </div>

                <div >
                    <label  class="form-label">Unit Price</label>
                    <input id="txtPrice" type="text" class="form-control"  aria-describedby="emailHelp">
                </div>

                <div >
                    <label  class="form-label">Quantity</label>
                    <input id="txtQty" type="text" class="form-control" aria-describedby="emailHelp">
                </div>

                <div>
                    <button id="btnItemAdd" type="submit" class="btn btn-primary ">Add</button>
                    <button id="btnItemUpdate" type="submit" class="btn btn-primary bg-success">Update</button>
                    <button id="btnItemDelete" type="submit" class="btn btn-primary bg-danger">Delete</button>
                </div>
            </div>

            <div class="col-4">
                <section class="row align-items-center">
                    <div class="col">
                        <h1>Search Item</h1>
                        <div >
                            <label  class="form-label">Item ID</label>
                            <input type="text" class="form-control" id="srhID" aria-describedby="emailHelp">
                            <button type="submit" class="btn btn-primary ">Search</button>
                        </div>

                    </div>
                </section>

            </div>
        </section>

        <section >
            <table id="itemTable" class="table table-striped table-hover">
                <thead class="bg-warning bg-opacity-75">
                <tr>
                    <th scope="col">Item-ID</th>
                    <th scope="col">Item Name</th>
                    <th scope="col">Price</th>
                    <th scope="col">Qty</th>
                </tr>
                </thead>
                <tbody id="itemBody">

                </tbody>
            </table>

        </section>
    </section>

</section>



<section class="container-fluid" id="placeORder">

    <h2 style="color: #FA981D" class="mt-2 border-bottom">Place Order</h2>

    <section class="row mt-3 border border-dark rounded p-3">
        <form action="">
            <div class="row border border-dark rounded p-2">

                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">Order ID</span>
                        <input class="form-control" type="text" placeholder="O-001" aria-label="Disabled input example" disabled>
                    </div>
                </div>
                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">Date</span>
                        <input class="form-control" type="text" placeholder="2023-05-17" aria-label="Disabled input example" disabled>
                    </div>
                </div>
                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">CustomerID</span>
                        <select id="custIds" onchange="getSelectedCustID()" class="form-select" aria-label="Default select example">
                            <option selected disabled hidden>Customer ID</option>

                        </select>
                    </div>
                </div>
                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">Customer Name</span>
                        <input id="custNameRst" class="form-control" type="text" placeholder="" aria-label="Disabled input example" disabled>
                    </div>
                </div>

            </div>
            <div class="row mt-5 mb-2 p-3 border border-dark rounded">

                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">Item ID</span>
                        <select id="itemIds" class="form-select" onchange="getSelectedItemID()" aria-label="Default select example">
                            <option selected disabled hidden>Item ID</option>

                        </select>
                    </div>
                </div>

                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">Item Name</span>
                        <input id="custItemRst" class="form-control" type="text" placeholder="" aria-label="Disabled input example" disabled>
                    </div>
                </div>

                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">Qty On Hand</span>
                        <input class="form-control" id="txtQytRst" type="text" placeholder="" aria-label="Disabled input example" disabled>
                    </div>
                </div>

                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">Unit Price</span>
                        <input id="txtPriceRst" class="form-control" type="text" placeholder="" aria-label="Disabled input example" disabled>
                    </div>
                </div>

                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">Quantity</span>
                        <input id="txtQtyOd" class="form-control" type="text" placeholder="" aria-label="Disabled input example">
                    </div>
                </div>

            </div>

            <div class="row mt-3">
                <div class="col-10"></div>
                <div class="col-2">
                    <button id="btnAddToCart" type="button" class="btn btn-outline-success">Add to Cart</button>
                    <button type="button" class="btn btn-outline-warning">Clear</button>
                </div>
            </div>

        </form>
    </section>

    <section class="row mt-3 border border-dark rounded p-3">
        <div class="row">
            <table class="table table-light table-striped">
                <thead>
                <tr>
                    <th style="background-color: #CD9A5A" scope="col">Item ID</th>
                    <th style="background-color: #CD9A5A" scope="col">Item Name</th>
                    <th style="background-color: #CD9A5A" scope="col">Qty</th>
                    <th style="background-color: #CD9A5A" scope="col">Unit Price</th>
                    <th style="background-color: #CD9A5A" scope="col">Total</th>
                    <th style="background-color: #CD9A5A" scope="col">Action</th>
                </tr>
                </thead>
                <tbody id="tblPlaceOrderBody">

                <tr>
                    <th scope="col">I001</th>
                    <th scope="col">Milk</th>
                    <th scope="col">2</th>
                    <th scope="col">2000.00</th>
                    <th scope="col">4000.00</th>
                    <th scope="col">
                        <button style="background-color:black; color: white; border-radius: 5px; border: none; width: 50px;  height: 30px" type="button" >Edit</button>
                        <button type="button" class="btn btn-danger">Delete</button>
                    </th>
                </tr>
                <tr>
                    <th scope="col">I002</th>
                    <th scope="col">Rice</th>
                    <th scope="col">10</th>
                    <th scope="col">2200.00</th>
                    <th scope="col">2200.00</th>
                    <th scope="col">
                        <button style="background-color:black; color: white; border-radius: 5px; border: none; width: 50px;  height: 30px" type="button" >Edit</button>
                        <button type="button" class="btn btn-danger">Delete</button>
                    </th>
                </tr>



                </tbody>
            </table>
        </div>
        <form action="">
            <div class="row mt-3">

                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">Total-Rs:</span>
                        <input class="form-control" type="text" placeholder="" aria-label="Disabled input example" disabled>
                    </div>
                </div>

                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">Discount-Rs:</span>
                        <input class="form-control" type="number" placeholder="" aria-label="Disabled input example">
                    </div>
                </div>

                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">Sub Tot-Rs:</span>
                        <input class="form-control" type="text" placeholder="" aria-label="Disabled input example" disabled>
                    </div>
                </div>
            </div>
        </form>
        <div class="row mt-3">
            <div class="col-10"></div>
            <div class="col-2">
                <button type="button" class="btn btn-outline-success">Purchase</button>
                <button type="button" class="btn btn-outline-danger">Cancel</button>
            </div>
        </div>
    </section>
</section>
<script>

    let cutomerList=[];
    let selectedTable;
    let findIndex;
    let buttonEdit;
    let buttonDelete;

    document.getElementById("item");
    document.getElementById("customer").style.display="none";
    document.getElementById("placeORder").style.display="none";

    document.getElementById("btnCustomer").addEventListener("click", function(){

        document.getElementById("customer").style.display="block";
        // document.getElementById("item").style.display="none";
        document.getElementById("item").style.display="none";
        document.getElementById("placeORder").style.display="none";

    });
    document.getElementById("btnItems").addEventListener("click", function (){

        document.getElementById("customer").style.display="none";
        document.getElementById("placeORder").style.display="none";
        document.getElementById("item").style.display="block"

    })
    document.getElementById("btnOrder").addEventListener("click", function(){
        document.getElementById("customer").style.display="none";
        // document.getElementById("item").style.display="none";
        document.getElementById("item").style.display="none";
        document.getElementById("placeORder").style.display="block";

    });





    $("#btnCustSave111").click(function () {

        let custId=$('#CustID').val();
        let CustName=$('#CustName').val();
        let CustAddress=$('#CustAddress').val();
        let contact=$('#CustContact').val();

        console.log(custId,CustName,CustAddress,console);

        let tr = $('<tr> <td>'+custId+'</td> <td>'+CustName+'</td> <td>'+CustAddress+'</td> <td>'+contact+'</td></tr>');

        cutomerList.push({id:custId , name:CustName , address:CustAddress , con:contact});
        //set the row to the table body
        // tBody.append(tr);
        $('#tableCustomerBody').append(tr);


        //set customer ids into place order
        let selectCustomerId = document.getElementById("custIds");
        let option = document.createElement("option");
        option.value=custId;
        option.text = custId;
        selectCustomerId.append(option);



    });


    console.log(cutomerList);
    $("#customerTable").dblclick(function (event){
        selectedTable=event.target.closest("tr");
        findIndex = cutomerList.findIndex(cutomerList => cutomerList.id === selectedTable.cells[0].textContent);

        $('#CustID').val(selectedTable.cells[0].textContent);
        $('#CustName').val(selectedTable.cells[1].textContent);
        $('#CustAddress').val(selectedTable.cells[2].textContent);
        $('#CustContact').val(selectedTable.cells[3].textContent);
    });




    $('#btnUpdateCust').click(function (event){
        let custId=$('#CustID').val();
        let CustName=$('#CustName').val();
        let CustAddress=$('#CustAddress').val();
        let contact=$('#CustContact').val();

        selectedTable.cells[0].textContent=custId;
        selectedTable.cells[1].textContent=CustName;
        selectedTable.cells[2].textContent=CustAddress;
        selectedTable.cells[3].textContent=contact;

        cutomerList[findIndex].id=custId;
        cutomerList[findIndex].name=CustName;
        cutomerList[findIndex].address=CustAddress;
        cutomerList[findIndex].con=contact;

    });

    $('#btnDelteCust').click(function (event){
        alert("sdsdadsadad");
        selectedTable.remove();

        cutomerList.splice(findIndex,1);
        console.log(cutomerList);
    });



    //Item JS Part
    let itemList=[];
    let selectedRowItem;
    let itemIndex;
    let table;
    $('#btnItemAdd').click(function (event){

        let itemId=$('#txtItemID').val();
        let itemName=$('#txtItemName').val();
        let itemPrice=$('#txtPrice').val();
        let itemQty=$('#txtQty').val();
        table = document.getElementById("itemBody");
        var row = table.insertRow(table.rows.length);

        let cell1 = row.insertCell(0);
        let cell2 = row.insertCell(1);
        let cell3 = row.insertCell(2);
        let cell4 = row.insertCell(3);
        cell1.innerHTML=itemId;
        cell2.innerHTML=itemName;
        cell3.innerHTML=itemPrice;
        cell4.innerHTML=itemQty;
        itemList.push({id:itemId, name:itemName, price:itemPrice, qty:itemQty});

        //set Item ids into place order
        let selectItemId = document.getElementById("itemIds");
        let option = document.createElement("option");
        option.value=itemId;
        option.text = itemId;
        selectItemId.append(option);

    });


    $("#itemTable").dblclick(function (event){
        selectedRowItem= event.target.closest("tr");
        itemIndex= itemList.findIndex(itemList => itemList.id === selectedRowItem.cells[0].textContent);

        $('#txtItemID').val(selectedRowItem.cells[0].textContent);
        $('#txtItemName').val(selectedRowItem.cells[1].textContent);
        $('#txtPrice').val(selectedRowItem.cells[2].textContent);
        $('#txtQty').val(selectedRowItem.cells[3].textContent);

    });

    $("#btnItemUpdate").click(function (event){
        let itemId=$('#txtItemID').val();
        let itemName=$('#txtItemName').val();
        let itemPrice=$('#txtPrice').val();
        let itemQty=$('#txtQty').val();

        console.log(itemId,itemName,itemPrice,itemQty, itemIndex);

        itemList[itemIndex].id=itemId;
        itemList[itemIndex].name=itemName;
        itemList[itemIndex].price=itemPrice;
        itemList[itemIndex].qty=itemQty;

        selectedRowItem.cells[0].textContent=itemId;
        selectedRowItem.cells[1].textContent=itemName;
        selectedRowItem.cells[2].textContent=itemPrice;
        selectedRowItem.cells[3].textContent=itemQty;
    });

    $("#btnItemDelete").click(function (event){
        itemList.pop(itemIndex,1);
        console.log(itemList);
        console.log(selectedRowItem);
        selectedRowItem.remove();
    });


//    Place Order From

    function getSelectedCustID() {

        var selectCustomerID = document.getElementById("custIds");
        var selectedCustId = selectCustomerID.value;
        cutomerList.forEach(function(customer) {
            if (customer.id==selectedCustId){
                $('#custNameRst').val(customer.name);
            }
        });
    }
    var selectedItemId;
    function getSelectedItemID() {

        var selectItemID = document.getElementById("itemIds");
         selectedItemId = selectItemID.value;
        itemList.forEach(function(item) {
            if (item.id==selectedItemId){
                $('#custItemRst').val(item.name);


                $('#txtPriceRst').val(item.price);

                $('#txtQytRst').val(item.qty);

            }
        });
    }
    $("#btnAddToCart").click(function (event){
       var  qty=$('#txtQtyOd').val();
       var itemforTable;

        itemList.forEach(function(item) {
            if (item.id==selectedItemId){
               item.qty=item.qty-qty;
                itemforTable=item;
            }
        });


        table = document.getElementById("tblPlaceOrderBody");
        var row = table.insertRow(table.rows.length);

        let cell1 = row.insertCell(0);
        let cell2 = row.insertCell(1);
        let cell3 = row.insertCell(2);
        let cell4 = row.insertCell(3);
        let cell5 = row.insertCell(4);
        let cell6 = row.insertCell(5);

        cell1.innerHTML=itemforTable.id;
        cell2.innerHTML=itemforTable.name;
        cell3.innerHTML=qty;
        cell4.innerHTML=itemforTable.price;
        cell5.innerHTML=itemforTable.price*qty;


        buttonEdit = document.createElement("button");
        buttonEdit.classList.add("btnEdit");
        buttonEdit.textContent="Edit";
        buttonDelete = document.createElement("button");
        buttonDelete.textContent="Delete";
        buttonDelete.classList.add("btnDelete");


        cell6.insertAdjacentElement("beforeend", buttonEdit);
        cell6.insertAdjacentElement("beforeend", buttonDelete);


    });

    tblPlaceOrderBody.addEventListener("click", function(event) {
        console.log("Ebuwa Table ");
        if (event.target.classList.contains("buttonDelete")) {
            console.log("Ebuwa Delete or edit ");
            // This code will execute when a delete button is clicked
            // You can access the clicked button's parent row and perform the delete action
            let row = event.target.closest("tr");
            // Perform your delete action here using the row data
            // For example, you can remove the row from the table:
            row.remove();
        }
    });

</script>
</body>
</html>